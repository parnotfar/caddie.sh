#!/bin/bash

# Caddie Module Management System
# Provides clean abstractions for module registration and help management

# Initialize module help storage
CADDIE_MODULE_HELP=""

# Module help management functions
caddie_module_help_set() {
    local help_text="$1"
    CADDIE_MODULE_HELP="$help_text"
}

caddie_module_help_get() {
    echo -e "$CADDIE_MODULE_HELP"
}

caddie_module_help_reset() {
    CADDIE_MODULE_HELP=""
}

caddie_module_help_append() {
    local help_text="$1"
    if [ -n "$CADDIE_MODULE_HELP" ]; then
        CADDIE_MODULE_HELP="${CADDIE_MODULE_HELP}${help_text}
"
    else
        CADDIE_MODULE_HELP="${help_text}
"
    fi
}

caddie_module_help_register() {
    local module="$1"
    local description="$2"
    caddie_module_help_append "  ${module} -${description}"
}

# Helper function to check if module help is loaded
caddie_module_help_loaded() {
    [ -n "$CADDIE_MODULE_HELP" ]
}

# Function to get module help count
caddie_module_help_count() {
    if [ -n "$CADDIE_MODULE_HELP" ]; then
        echo "$CADDIE_MODULE_HELP" | grep -c "^  " || echo "0"
    else
        echo "0"
    fi
}
